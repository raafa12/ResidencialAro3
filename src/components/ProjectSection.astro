---
// src/components/ProjectSection.astro
---

<section id="proyecto" class="section project-hero">
  <div class="container">
    <div class="project-grid">
      <div class="project-content fade-in">
        <div class="intro-header">
          <span class="section-tag">El Proyecto</span>
          <h2>Patrimonio y modernidad<br>en perfecta armonía</h2>
        </div>
        <p>En el corazón de Santoña, junto al Ayuntamiento y la histórica Plaza de San Antonio, recuperamos un edificio centenario para crear ocho viviendas únicas y dos locales comerciales. Un proyecto que combina la riqueza patrimonial con las más altas calidades constructivas contemporáneas.</p>
      </div>
      <div class="project-image">
        <div class="image-container">
          <!-- Replace with your actual image path -->
          <img 
            src="/images/project-hero.jpg" 
            alt="Edificio restaurado en Santoña"
            class="fade-in"
            data-delay="0.2"
          />
        </div>
      </div>
    </div>
  </div>
</section>

<section id="caracteristicas" class="features-showcase">
  <div class="features-image">
    <img 
      src="/images/features-showcase.jpg" 
      alt="Vista del edificio por dentro"
      class="feature-image"
    />
    <div class="features-overlay">
      <div class="features-content">
        <h2 class="fade-in">Lujo que se siente,<br>diseño que perdura</h2>
        <p class="fade-in" data-delay="0.1">
          Cada estancia está pensada para transmitir armonía y confort. La luz natural se funde con los acabados de alta gama, creando un ambiente sofisticado y acogedor. Detalles contemporáneos, espacios amplios y materiales selectos hacen de este piso un lugar exclusivo para disfrutar de Santoña con el máximo estilo.
        </p>
      </div>
    </div>
  </div>
</section>

<section id="santona" class="section location">
  <div class="container">
    <div class="location-content fade-in">
      <div class="location-header">
        <span class="section-tag light">La Villa</span>
        <h2>Santoña</h2>
      </div>
      <div class="location-text">
        <p>Villa marinera enclavada entre el Mar Cantábrico y las marismas, Santoña es cabeza de las históricas Siete Villas de la Mar. Su patrimonio se extiende desde la iglesia románica de Santa María del Puerto hasta las fortificaciones que defendían su costa.</p>
        <p>Mundialmente reconocida por sus anchoas artesanales, ofrece un entorno natural excepcional para la vela, el surf y el disfrute de playas únicas.</p>
      </div>
    </div>
    <div class="location-highlights fade-in" data-delay="0.3">
      <div class="highlight">
        <div class="highlight-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z" stroke="currentColor" stroke-width="1.5"/>
            <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/>
          </svg>
        </div>
        <span>Centro histórico</span>
      </div>
      <div class="highlight">
        <div class="highlight-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 12h18m-9-9l9 9-9 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span>Patrimonio cultural</span>
      </div>
      <div class="highlight">
        <div class="highlight-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.5 19H9a7 7 0 117 7 7 7 0 01-7-7v-11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </div>
        <span>Gastronomía marina</span>
      </div>
    </div>
  </div>
</section>

<style>
  .project-hero {
    padding: 120px 0;
    background: var(--white);
    overflow: hidden;
  }

  .project-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
  }

  .project-content {
    max-width: 600px;
    padding-right: 40px;
  }

  .project-image {
    position: relative;
    height: 100%;
    min-height: 500px;
  }

  .image-container {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: hidden;
    border-radius: 8px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    transform: translateZ(0);
  }

  .project-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 1.2s cubic-bezier(0.2, 0.6, 0.2, 1);
    will-change: transform;
  }

  .project-image:hover img {
    transform: scale(1.03);
  }

  /* Animation for the image container */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }

  .project-image::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0) 100%
    );
    z-index: 1;
    pointer-events: none;
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .project-grid {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .project-content {
      padding-right: 0;
      max-width: 100%;
    }

    .project-image {
      min-height: 400px;
      margin-top: 40px;
    }
  }

  .intro-header {
    margin-bottom: 40px;
  }

  .section-tag {
    display: block;
    font-size: 1.1rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 3px;
    color: var(--primary);
    margin-bottom: 25px;
    position: relative;
  }

  .section-tag::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 0;
    width: 50px;
    height: 2px;
    background: var(--primary);
  }

  .project-content h2 {
    font-size: 3.5rem;
    font-weight: 300;
    color: var(--dark);
    margin: 0 0 1.5rem 0;
    line-height: 1.2;
    letter-spacing: -1px;
  }

  .project-content p {
    font-size: 1.1rem;
    line-height: 1.8;
    color: var(--gray-600);
    font-weight: 300;
    margin-bottom: 0;
  }

  .features-showcase {
    position: relative;
    width: 100%;
    height: 100vh;
    min-height: 800px;
    overflow: hidden;
    margin: 0;
    padding: 0;
  }

  .features-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .feature-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .features-overlay {
    position: absolute;
    top: 0;
    right: 0;
    width: 50%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: 0 60px;
    pointer-events: none;
  }

  .features-content {
    max-width: 600px;
    margin: 0;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    padding: 4rem 3rem;
    border-radius: 8px;
    pointer-events: auto;
  }

  .features-content h2 {
    color: #111;
    font-size: 2.8rem;
    line-height: 1.2;
    margin-bottom: 2rem;
    font-weight: 300;
    letter-spacing: -0.5px;
  }

  .features-content p {
    color: #555;
    font-size: 1.1rem;
    line-height: 1.7;
    margin-bottom: 0;
    font-weight: 300;
  }

  @media (max-width: 1024px) {
    .features-overlay {
      width: 60%;
      padding: 0 40px;
    }
    
    .features-content {
      padding: 3rem 2.5rem;
    }
  }

  @media (max-width: 768px) {
    .features-showcase {
      position: relative;
      height: 100vh;
      min-height: 600px;
    }

    .features-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .feature-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .features-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
      padding: 80px 25px 40px;
      margin: 0;
      width: 100%;
      max-width: 100%;
      height: auto;
      transform: none;
    }
    
    .features-content {
      max-width: 100%;
      margin: 0 auto;
      padding: 2.5rem 2rem;
      background: transparent;
      backdrop-filter: none;
      color: white;
      text-align: center;
      transform: none;
    }
    
    .features-content h2 {
      font-size: 2.2rem;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .features-content p {
      font-size: 1.1rem;
      color: rgba(255,255,255,0.9);
      margin-bottom: 2rem;
    }
  }

  /* Location Section Styles */
  .location {
    background: var(--primary-darker);
    color: var(--white);
    padding: 120px 0;
    position: relative;
    overflow: hidden;
  }

  .location-content {
    position: relative;
    z-index: 2;
    text-align: center;
    margin-bottom: 60px;
  }

  .location-header {
    position: relative;
    display: inline-block;
  }

  .location-header h2 {
    font-size: 3.5rem;
    font-weight: 300;
    margin: 0 0 1.5rem 0;
    letter-spacing: -1px;
    color: var(--white);
  }

  .section-tag.light {
    color: rgba(255, 255, 255, 0.8);
    position: relative;
    display: block;
    margin-bottom: 1.5rem;
  }

  .section-tag.light::after {
    content: '';
    position: absolute;
    bottom: -0.75rem;
    left: 50%;
    transform: translateX(-50%);
    width: 50px;
    height: 2px;
    background: var(--white);
  }

  .location-text {
    max-width: 800px;
    margin: 0 auto;
  }

  .location-text p {
    font-size: 1.15rem;
    line-height: 1.8;
    opacity: 0.95;
    font-weight: 300;
    margin-bottom: 1.5rem;
    color: var(--white);
  }

  .location-text p:last-child {
    margin-bottom: 0;
  }

  .location-highlights {
    display: flex;
    justify-content: center;
    gap: 60px;
    position: relative;
    z-index: 2;
  }

  .highlight {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    opacity: 0.8;
    transition: all 0.3s ease;
  }

  .highlight:hover {
    opacity: 1;
    transform: translateY(-2px);
  }

  .highlight-icon {
    width: 50px;
    height: 50px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
  }

  .highlight:hover .highlight-icon {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.1);
  }

  .highlight span {
    font-size: 0.9rem;
    font-weight: 400;
    color: var(--white);
    text-align: center;
  }

  /* Responsive styles */
  @media (max-width: 1024px) {
    .features-overlay {
      width: 50%;
      padding: 0 40px;
    }
    
    .location-highlights {
      gap: 40px;
    }
  }

  @media (max-width: 768px) {
    .features-overlay {
      position: relative;
      width: 100%;
      margin: 0;
      transform: none;
      top: auto;
      right: auto;
      padding: 0 20px;
    }
    
    .location {
      padding: 100px 0;
    }
    
    .location-header h2 {
      font-size: 2.8rem;
      margin-bottom: 2rem;
    }
    
    .location-text p {
      font-size: 1rem;
    }
    
    .location-highlights {
      flex-direction: column;
      gap: 30px;
    }
  }
  
  @media (max-width: 480px) {
    .location-header h2 {
      font-size: 2.4rem;
    }
  }

  /* Update the fade-in animation for this section */
  .fade-in {
    opacity: 0;
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  .fade-in.in-view {
    opacity: 1;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const fadeElements = document.querySelectorAll('.fade-in');
    
    const fadeInOnScroll = () => {
      fadeElements.forEach(element => {
        const elementTop = element.getBoundingClientRect().top;
        const elementVisible = 150;
        const delay = element.dataset.delay || 0;
        
        if (elementTop < window.innerHeight - elementVisible) {
          setTimeout(() => {
            element.classList.add('in-view');
          }, delay * 1000);
        }
      });
    };

    // Initial check
    fadeInOnScroll();
    
    // Check on scroll
    window.addEventListener('scroll', fadeInOnScroll);
  });
</script>